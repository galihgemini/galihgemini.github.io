{"version":3,"file":"app~e4317507.bundle.js","mappings":"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","sources":["webpack://restaurant-catalogue/./src/scripts/utils/sw-register.js","webpack://restaurant-catalogue/./src/scripts/utils/websocket-initiator.js","webpack://restaurant-catalogue/./src/scripts/utils/drawer-initiator.js","webpack://restaurant-catalogue/./src/scripts/routes/url-parser.js","webpack://restaurant-catalogue/./src/scripts/views/pages/home.js","webpack://restaurant-catalogue/./src/scripts/utils/like-button-initiator.js","webpack://restaurant-catalogue/./src/scripts/views/templates/template-creator.js","webpack://restaurant-catalogue/./src/scripts/views/pages/detail.js","webpack://restaurant-catalogue/./src/scripts/views/pages/favorite.js","webpack://restaurant-catalogue/./src/scripts/routes/routes.js","webpack://restaurant-catalogue/./src/scripts/views/app.js"],"sourcesContent":["/* eslint-disable no-console */\nimport * as WorkboxWindow from 'workbox-window';\n\nconst swRegister = async () => {\n  if (!('serviceWorker' in navigator)) {\n    console.log('Service Worker not supported in the browser');\n    return;\n  }\n\n  const wb = new WorkboxWindow.Workbox('/sw.bundle.js');\n  try {\n    await wb.register();\n    console.log('Service worker registered');\n  } catch (error) {\n    console.log('Failed to register service worker', error);\n  }\n};\n\nexport default swRegister;\n","const WebSocketInitiator = {\r\n  init(url) {\r\n    const webSocket = new WebSocket(url);\r\n    webSocket.onmessage = this._onMessageHandler;\r\n  },\r\n\r\n  _onMessageHandler(message) {\r\n    console.log(message.data);\r\n    console.log(JSON.parse(message.data));\r\n  },\r\n};\r\nexport default WebSocketInitiator;\r\n","const DrawerInitiator = {\n  init({ button, drawer, content }) {\n    button.addEventListener('click', (event) => {\n      this._toggleDrawer(event, drawer);\n    });\n\n    content.addEventListener('click', (event) => {\n      this._closeDrawer(event, drawer);\n    });\n  },\n\n  _toggleDrawer(event, drawer) {\n    event.stopPropagation();\n    drawer.classList.toggle('open');\n  },\n\n  _closeDrawer(event, drawer) {\n    event.stopPropagation();\n    drawer.classList.remove('open');\n  },\n};\n\nexport default DrawerInitiator;\n","const UrlParser = {\n  parseActiveUrlWithCombiner() {\n    const url = window.location.hash.slice(1).toLowerCase();\n    const splitedUrl = this._urlSplitter(url);\n    return this._urlCombiner(splitedUrl);\n  },\n\n  parseActiveUrlWithoutCombiner() {\n    const url = window.location.hash.slice(1).toLowerCase();\n    return this._urlSplitter(url);\n  },\n\n  _urlSplitter(url) {\n    const urlsSplits = url.split('/');\n    return {\n      resource: urlsSplits[1] || null,\n      id: urlsSplits[2] || null,\n      verb: urlsSplits[3] || null,\n    };\n  },\n\n  _urlCombiner(splitedUrl) {\n    return (splitedUrl.resource ? `/${splitedUrl.resource}` : '/')\n      + (splitedUrl.id ? '/:id' : '')\n      + (splitedUrl.verb ? `/${splitedUrl.verb}` : '');\n  },\n};\n\nexport default UrlParser;\n","import RestoListApp from '../../data/restolistapp-source';\r\nimport '../../components/restaurant-item';\r\n\r\nconst Home = {\r\n  async render() {\r\n    return `\r\n    <div class=\"content\">\r\n      <h2 class=\"content__heading\">\r\n        List Restoran\r\n      </h2>\r\n      <div id=\"restaurant-list\" class=\"restaurant-list\">\r\n        <p>Sedang Memuat Konten...</p>\r\n      </div>\r\n    </div>\r\n  `;\r\n  },\r\n\r\n  async afterRender() {\r\n    const { restaurants } = await RestoListApp.restaurants();\r\n    const restaurantListContainer = document.getElementById('restaurant-list');\r\n\r\n    restaurantListContainer.innerHTML = '';\r\n\r\n    restaurants.forEach((restaurant) => {\r\n      const restaurantItem = document.createElement('restaurant-item');\r\n      restaurantItem.restaurant = restaurant;\r\n\r\n      restaurantListContainer.appendChild(restaurantItem);\r\n    });\r\n  },\r\n};\r\n\r\nexport default Home;\r\n","import FavoriteRestaurantIdb from '../data/favorite-restaurant-idb';\r\nimport {\r\n  createLikeButtonTemplate,\r\n  createLikedButtonTemplate,\r\n} from '../views/templates/template-creator';\r\n\r\nconst LikeButtonInitiator = {\r\n  async init({ likeButton, restaurant, favoriteRestaurant }) {\r\n    this._likeButton = likeButton;\r\n    this._restaurant = restaurant;\r\n    this._favoriteRestaurant = favoriteRestaurant;\r\n\r\n    await this._renderButton();\r\n  },\r\n\r\n  async _renderButton() {\r\n    const { id } = this._restaurant;\r\n\r\n    if (await this._isRestaurantExist(id)) {\r\n      this._renderLiked();\r\n    } else {\r\n      this._renderLike();\r\n    }\r\n  },\r\n\r\n  async _isRestaurantExist(id) {\r\n    const restaurant = await FavoriteRestaurantIdb.getRestaurant(id);\r\n    return !!restaurant;\r\n  },\r\n\r\n  _renderLike() {\r\n    this._likeButton.innerHTML = createLikeButtonTemplate();\r\n\r\n    const likeButton = document.querySelector('#likeButton');\r\n    likeButton.addEventListener('click', async () => {\r\n      await FavoriteRestaurantIdb.putRestaurant(this._restaurant);\r\n      this._renderButton();\r\n    });\r\n  },\r\n\r\n  _renderLiked() {\r\n    this._likeButton.innerHTML = createLikedButtonTemplate();\r\n\r\n    const likeButton = document.querySelector('#likeButton');\r\n    likeButton.addEventListener('click', async () => {\r\n      await FavoriteRestaurantIdb.deleteRestaurant(this._restaurant.id);\r\n      this._renderButton();\r\n    });\r\n  },\r\n};\r\n\r\nexport default LikeButtonInitiator;\r\n","const createLikeButtonTemplate = () => `\n  <button aria-label=\"like this restaurant\" id=\"likeButton\" class=\"like\">\n    <i class=\"fa fa-heart-o\" aria-hidden=\"true\"></i>\n  </button>\n`;\n\nconst createLikedButtonTemplate = () => `\n  <button aria-label=\"unlike this restaurant\" id=\"likeButton\" class=\"like\">\n    <i class=\"fa fa-heart\" aria-hidden=\"true\"></i>\n  </button>\n`;\n\nexport {\n  createLikeButtonTemplate,\n  createLikedButtonTemplate,\n};\n","import RestoListApp from '../../data/restolistapp-source';\nimport UrlParser from '../../routes/url-parser';\nimport LikeButtonInitiator from '../../utils/like-button-initiator';\nimport '../../components/detail-item';\nimport '../../components/review-item';\n\nconst Detail = {\n  async render() {\n    return `\n      <div id=\"restaurant\" class=\"restaurant\">\n        <p class=\"text-center\">Sedang Memuat Konten...</p>\n      </div>\n    `;\n  },\n\n  async afterRender() {\n    const url = UrlParser.parseActiveUrlWithoutCombiner();\n\n    const detailContainer = document.getElementById('restaurant');\n    const { restaurant } = await RestoListApp.detailRestaurant(url.id);\n\n    detailContainer.innerHTML = '';\n\n    const detailItem = document.createElement('detail-item');\n    detailItem.restaurant = restaurant;\n    detailContainer.appendChild(detailItem);\n\n    LikeButtonInitiator.init({\n      likeButton: document.querySelector('#like-button'),\n      restaurant,\n    });\n\n    const reviewContainer = document.getElementById('review-container');\n    restaurant.customerReviews.map((review) => {\n      const reviewItem = document.createElement('review-item');\n      reviewItem.review = review;\n      return reviewContainer.appendChild(reviewItem);\n    });\n  },\n\n  _getEmptyMovieTemplate() {\n    return '<div class=\"restaurant-item__not__found\">Tidak ada restaurant untuk ditampilkan</div>';\n  },\n};\n\nexport default Detail;\n","import FavoriteRestaurantIdb from '../../data/favorite-restaurant-idb';\r\n\r\nconst Favorite = {\r\n  async render() {\r\n    return `\r\n    <div class=\"content\">\r\n      <h2 class=\"content__heading\">List Favorit</h2>\r\n        <div id=\"restaurant-list\" class=\"restaurant-list\">\r\n        </div>\r\n    </div>\r\n    `;\r\n  },\r\n\r\n  async afterRender() {\r\n    const restaurants = await FavoriteRestaurantIdb.getAllRestaurant();\r\n    const restaurantListContainer = document.querySelector('#restaurant-list');\r\n    const restaurantContainer = document.querySelector('.content');\r\n\r\n    if (restaurants.length > 0) {\r\n      restaurantListContainer.innerHTML = '';\r\n      restaurants.forEach((restaurant) => {\r\n        const restaurantItem = document.createElement('restaurant-item');\r\n        restaurantItem.restaurant = restaurant;\r\n\r\n        restaurantListContainer.appendChild(restaurantItem);\r\n      });\r\n    } else {\r\n      restaurantContainer.innerHTML = `\r\n      <p class=\"message\">You don't have favorite restaurant</p>\r\n    `;\r\n    }\r\n  },\r\n\r\n};\r\n\r\nexport default Favorite;\r\n","import Home from '../views/pages/home';\nimport Detail from '../views/pages/detail';\nimport Favorite from '../views/pages/favorite';\n\nconst routes = {\n  '/': Home,\n  '/detail/:id': Detail,\n  '/favorite': Favorite,\n};\n\nexport default routes;\n","import DrawerInitiator from '../utils/drawer-initiator';\nimport UrlParser from '../routes/url-parser';\nimport routes from '../routes/routes';\n\nclass App {\n  constructor({ button, drawer, content }) {\n    this._button = button;\n    this._drawer = drawer;\n    this._content = content;\n\n    this._initialAppShell();\n  }\n\n  _initialAppShell() {\n    DrawerInitiator.init({\n      button: this._button,\n      drawer: this._drawer,\n      content: this._content,\n    });\n  }\n\n  async renderPage() {\n    const url = UrlParser.parseActiveUrlWithCombiner();\n    const page = routes[url];\n    this._content.innerHTML = await page.render();\n    await page.afterRender();\n\n    const skipLink = document.querySelector('.skip-link');\n    skipLink.addEventListener('click', (event) => {\n      event.preventDefault();\n      document.querySelector('#mainContent').focus();\n    });\n  }\n}\n\nexport default App;\n"],"names":["i","navigator","console","log","wb","WorkboxWindow","register","init","url","WebSocket","onmessage","this","_onMessageHandler","message","data","JSON","parse","button","drawer","content","addEventListener","event","_toggleDrawer","_closeDrawer","stopPropagation","classList","toggle","remove","parseActiveUrlWithCombiner","window","location","hash","slice","toLowerCase","splitedUrl","_urlSplitter","_urlCombiner","parseActiveUrlWithoutCombiner","urlsSplits","split","resource","id","verb","render","afterRender","RestoListApp","restaurants","restaurantListContainer","document","getElementById","innerHTML","forEach","restaurant","restaurantItem","createElement","appendChild","likeButton","favoriteRestaurant","_likeButton","_restaurant","_favoriteRestaurant","_renderButton","_isRestaurantExist","_renderLiked","_renderLike","FavoriteRestaurantIdb","querySelector","Home","UrlParser","detailContainer","detailItem","LikeButtonInitiator","reviewContainer","customerReviews","map","review","reviewItem","_getEmptyMovieTemplate","restaurantContainer","length","_button","_drawer","_content","_initialAppShell","DrawerInitiator","page","routes","preventDefault","focus"],"sourceRoot":""}